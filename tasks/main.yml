---
- name: Gather facts if they are missing
  ansible.builtin.setup:
  when: ansible_facts | length == 0

- name: Install TAK Server on Debian
  ansible.builtin.include_tasks: "Debian/{{ item }}"
  loop:
    - prerequisites.yml
    - install.yml
    - post-configuration-cert.yml
    - post-configuration-config.yml
    - post-configuration-service.yml
    - post-configuration-webadmin.yml
    - post-configuration-firewall.yml
  when: ansible_facts['os_family'] == 'Debian'
